

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Jin Runda">
  <meta name="keywords" content="">
  
    <meta name="description" content="基础知识NetworkX图的生成在NetworkX中，有以下4种基本的图类型： Graph：无向图（undirected Graph）； DiGraph：有向图（directed Graph）； MultiGraph：多重无向图，即两个顶点之间的边数多于一条，也允许存在环； MultiDiGraph：多重有向图。 可以通过以下代码创建上述四种图类型的空对象（默认已导入模块） 1234G &#x3D; nx.">
<meta property="og:type" content="article">
<meta property="og:title" content="数学建模-图论模型">
<meta property="og:url" content="http://example.com/2023/08/16/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B/index.html">
<meta property="og:site_name" content="jrd&#39;s blog">
<meta property="og:description" content="基础知识NetworkX图的生成在NetworkX中，有以下4种基本的图类型： Graph：无向图（undirected Graph）； DiGraph：有向图（directed Graph）； MultiGraph：多重无向图，即两个顶点之间的边数多于一条，也允许存在环； MultiDiGraph：多重有向图。 可以通过以下代码创建上述四种图类型的空对象（默认已导入模块） 1234G &#x3D; nx.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162048850.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162111622.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162122383.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162124838.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162139752.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171449853.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171449864.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171451619.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171453726.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171456829.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171516118.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171518744.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171520068.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171520347.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171521148.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171522603.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171525986.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171525671.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171542935.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171544875.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171547925.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171548909.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171633503.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171633064.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171717149.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171718898.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171718477.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171719235.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171952954.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171952936.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171952330.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171953928.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171954292.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171954741.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171954451.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308172004700.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308172005795.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308172005300.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517158.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517171.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517559.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517331.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517497.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181601530.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181728117.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181730196.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181730342.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181735351.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181735479.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181736214.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181738512.png">
<meta property="og:image" content="http://example.com/2023/08/16/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B/image-20230820004106878.png">
<meta property="og:image" content="http://example.com/2023/08/16/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B/image-20230820003341836.png">
<meta property="og:image" content="http://example.com/2023/08/16/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B/image-20230820004449616.png">
<meta property="og:image" content="c:/Users/86187/AppData/Roaming/Typora/typora-user-images/image-20230820004548166.png">
<meta property="og:image" content="http://example.com/2023/08/16/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B/image-20230820005647995.png">
<meta property="og:image" content="http://example.com/2023/08/16/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B/image-20230820010430223.png">
<meta property="og:image" content="http://example.com/2023/08/16/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B/image-20230820010542515.png">
<meta property="og:image" content="c:/Users/86187/AppData/Roaming/Typora/typora-user-images/image-20230820013104221.png">
<meta property="og:image" content="http://example.com/2023/08/16/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1-%E5%9B%BE%E8%AE%BA%E6%A8%A1%E5%9E%8B/image-20230820013143068.png">
<meta property="og:image" content="c:/Users/86187/AppData/Roaming/Typora/typora-user-images/image-20230820013230385.png">
<meta property="article:published_time" content="2023-08-16T17:40:48.000Z">
<meta property="article:modified_time" content="2025-01-15T13:58:48.351Z">
<meta property="article:author" content="Jin Runda">
<meta property="article:tag" content="数学建模">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162048850.png">
  
  
  <title>数学建模-图论模型 - jrd&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>jrd</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="数学建模-图论模型">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2023-08-16 17:40" pubdate>
        August 16, 2023 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      18k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      154 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">数学建模-图论模型</h1>
            
            <div class="markdown-body">
              <h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><h1 id="NetworkX"><a href="#NetworkX" class="headerlink" title="NetworkX"></a>NetworkX</h1><h2 id="图的生成"><a href="#图的生成" class="headerlink" title="图的生成"></a>图的生成</h2><p><strong>在NetworkX中，有以下4种基本的图类型：</strong></p>
<p>Graph：无向图（undirected Graph）；</p>
<p>DiGraph：有向图（directed Graph）；</p>
<p>MultiGraph：多重无向图，即两个顶点之间的边数多于一条，也允许存在环；</p>
<p>MultiDiGraph：多重有向图。</p>
<p>可以通过以下代码创建上述四种图类型的空对象（默认已导入模块）</p>
<figure class="highlight ini"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">G</span> = nx.Graph()         <span class="hljs-comment">#创建无向图</span><br><span class="hljs-attr">G</span> = nx.DiGraph()       <span class="hljs-comment">#创建有向图</span><br><span class="hljs-attr">G</span> = nx.MultiGraph()    <span class="hljs-comment">#创建多重无向图</span><br><span class="hljs-attr">G</span> = nx.MultiDigraph()  <span class="hljs-comment">#创建多重有向图</span><br></code></pre></td></tr></table></figure>

<p>e.g.<strong>画一个8个顶点的3正则图（每个顶点的度都为3）</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162048850.png" srcset="/img/loading.gif" lazyload alt="image-20230816204652889"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import networkx as nx    <br>import pylab as plt   <br><span class="hljs-comment"># 生成一个3正则图（即每个节点有3个相邻节点）  </span><br>G = nx.cubical_graph() # 生成一个3正则图 <br>***<br>nx.cubical_graph() 生成的立方体图的结构，它有 2^n 个节点，其中 n 是维数。在这个例子中，维数为 3，因此有 2^3 = 8 个节点。<br>***<br><br><span class="hljs-comment"># 在1号子窗口中绘制G  </span><br>plt.subplot(121)       # 激活1号子窗口  <br>***<br>121是一个指示符，表示这个图像应该是1行2列的子图的第1个。<br>***<br><br><span class="hljs-comment"># 在这个子窗口中绘制G，并带有标签  </span><br>nx.draw(G, <span class="hljs-attribute">with_labels</span>=<span class="hljs-literal">True</span>) <br>***<br>nx.draw()函数是一个用于绘制图形的函数，它接受一个图G作为输入，并绘制出这个图	的图形表示。<span class="hljs-attribute">with_labels</span>=<span class="hljs-literal">True</span>是一个可选的参数，表示在绘制图形时是否要带有标签。当with_labels=True时，每个节点都会有一个标签，标签的内容是节点的编号。<br>***<br><br><span class="hljs-comment"># 切换到2号子窗口  </span><br>plt.subplot(122)  <br><span class="hljs-comment"># 创建一个列表，包含从&#x27;v1&#x27;到&#x27;v8&#x27;的字符串  </span><br>s = [<span class="hljs-string">&#x27;v&#x27;</span>+str(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(1,9)]  <br><span class="hljs-comment"># 将这个列表转换为一个字典，其中键是整数（顶点的索引），值是字符串形式的标签  </span><br>s = dict(zip(range(8), s))  #构造顶点标注的字符字典<br><br><span class="hljs-comment"># 在2号子窗口中再次绘制G，使用指定的布局、标签、颜色和形状  </span><br>nx.draw(G,<span class="hljs-attribute">pos</span>=nx.circular_layout(G), <span class="hljs-attribute">labels</span>=s,  <br>        <span class="hljs-attribute">node_color</span>=<span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-attribute">node_shape</span>=<span class="hljs-string">&#x27;s&#x27;</span>, <span class="hljs-attribute">edge_color</span>=<span class="hljs-string">&#x27;b&#x27;</span>)  <br>***<br><span class="hljs-attribute">pos</span>=nx.circular_layout(G) 指定了图的节点布局。这里使用的是circular_layout，它会生成一个有向图布局，节点按照循环顺序排列。<br><span class="hljs-attribute">labels</span>=s 表示为每个节点添加标签。s 应该是一个字典，键是节点，值是对应的标签。<br><span class="hljs-attribute">node_color</span>=<span class="hljs-string">&#x27;y&#x27;</span> 和 <span class="hljs-attribute">node_shape</span>=<span class="hljs-string">&#x27;s&#x27;</span> 分别指定了节点的颜色和形状。这里节点的颜色为黄色（<span class="hljs-string">&#x27;y&#x27;</span>），形状为小写字母 <span class="hljs-string">&#x27;s&#x27;</span> 对应的形状（在 NetworkX 中，这个形状类似于一个方形，但有一个小圆点在中心）。<br>最后，<span class="hljs-attribute">edge_color</span>=<span class="hljs-string">&#x27;b&#x27;</span> 指定了边的颜色为蓝色（<span class="hljs-string">&#x27;b&#x27;</span>）。<br>***<br>        <br><span class="hljs-comment"># 显示所有的图形  </span><br>plt.show()<br></code></pre></td></tr></table></figure>

<p>下面解释一下NetworkX库画图函数draw中的主要参数，draw函数的调用格式如下：</p>
<p>draw(G, pos=None, ax=None, **kwds)</p>
<p>其中，G表示要绘制的网络图，pos是表示位置坐标的字典数据，默认为None，其用于建立布局，图形的布局有五种设置：</p>
<p>circular_layout：顶点在一个圆环上均匀分布；</p>
<p>random_layout：顶点在一个单位正方形内随机分布；</p>
<p>shell_layout：  顶点在多个同心圆上分布；</p>
<p>spring_layout： 用Fruchterman-Reingold算法排列顶点；</p>
<p>spectral_layout：根据图的拉普拉斯特征向量排列顶点。</p>
<p>也可以有领接矩阵直接创建无向图和有向图命令如下：</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># 由邻接矩阵W创建无像图G</span><br><span class="hljs-attr">G</span> = nx.Graph(W)<br><span class="hljs-comment"># 由邻接矩阵W创建有向图G</span><br><span class="hljs-attr">G</span> = nx.DiGraph(W)<br></code></pre></td></tr></table></figure>

<h2 id="数据的储存结构"><a href="#数据的储存结构" class="headerlink" title="数据的储存结构"></a><strong>数据的储存结构</strong></h2><p>NetworkX存储网络的相关数据时，使用了Python的3层字典结构，这有利于在存储大规模稀疏网络时提高存取速度。下面举例说明其存储方式。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import networkx as nx<br>import pylab as plt<br><br>G = nx.Graph()<br>G.add_node(1)    #添加标号为1的一个顶点<br>G.add_nodes_from([<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>])  #从列表中添加多个顶点<br>G.add_edge(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>)   #添加顶点A和B之间的一条边<br>G.add_edge(1, 2, <span class="hljs-attribute">weight</span>=0.5)   #添加顶点1和2之间权重为0.4的一条边<br>e = [(<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;B&#x27;</span>,0.3),<br>	 (<span class="hljs-string">&#x27;B&#x27;</span>,<span class="hljs-string">&#x27;C&#x27;</span>,0.9),<br>	 (<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;C&#x27;</span>,0.5),<br>	 (<span class="hljs-string">&#x27;C&#x27;</span>,<span class="hljs-string">&#x27;D&#x27;</span>,1.2)]<br>G.add_weighted_edges_from(e)  #从列表中添加多条赋权边<br><span class="hljs-built_in">print</span>(G.adj)      #显示图的邻接表的字典数据<br><span class="hljs-built_in">print</span>(list(G.adjacency()))  #显示图的邻接表的列表数据<br><span class="hljs-comment"># 绘制图形</span><br>pos = nx.spring_layout(G)  # 指定节点位置<br>labels = &#123;n: str(n) <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> G.nodes()&#125;  # 添加节点标签<br>nx.draw(G, pos, <span class="hljs-attribute">with_labels</span>=<span class="hljs-literal">True</span>, <span class="hljs-attribute">edge_color</span>=<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-attribute">node_color</span>=<span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-attribute">node_size</span>=1500, <span class="hljs-attribute">width</span>=2, <span class="hljs-attribute">font_size</span>=12)<br><br><span class="hljs-comment"># 显示权重</span><br>edges = G.edges()<br><span class="hljs-keyword">for</span> edge <span class="hljs-keyword">in</span> edges:<br>	weight = G.get_edge_data(<span class="hljs-number">*ed</span>ge[<span class="hljs-string">&#x27;weight&#x27;</span>]<br>	<span class="hljs-built_in">print</span>(f<span class="hljs-string">&quot;Edge &#123;edge&#125;: weight = &#123;weight&#125;&quot;</span>)<br></code></pre></td></tr></table></figure>



<p><strong>画出以下图片的非赋权有向图</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162111622.png" srcset="/img/loading.gif" lazyload alt="image-20230816211129481"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import networkx as nx<br>import pylab as plt<br><span class="hljs-attribute">G</span>=nx.DiGraph()<br>List=[(1,2),(1,3),(2,3),(3,2),(3,5),(4,2),(4,6),<br>      (5,2),(5,4),(6,5)]<br>G.add_nodes_from(range(1,7))  #必须显式地对顶点赋值<br>G.add_edges_from(List)<br>plt.rc(<span class="hljs-string">&#x27;font&#x27;</span>,<span class="hljs-attribute">size</span>=16)<br><span class="hljs-attribute">pos</span>=nx.shell_layout(G) <br>nx.draw(G,pos,<span class="hljs-attribute">with_labels</span>=<span class="hljs-literal">True</span>, <span class="hljs-attribute">font_weight</span>=<span class="hljs-string">&#x27;bold&#x27;</span>, <span class="hljs-attribute">node_color</span>=<span class="hljs-string">&#x27;y&#x27;</span>)<br>plt.show()<br></code></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162122383.png" srcset="/img/loading.gif" lazyload alt="image-20230816212229226"></p>
<h2 id="图片数据的导出"><a href="#图片数据的导出" class="headerlink" title="图片数据的导出"></a>图片数据的导出</h2><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162124838.png" srcset="/img/loading.gif" lazyload alt="image-20230816212404711"></p>
<p><strong>导出上图所示的赋权图的邻接矩阵和邻接表等数据并重新绘图</strong>。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import networkx as nx<br>import pylab as plt<br>import numpy as np<br><br><span class="hljs-attribute">G</span>=nx.Graph()<br>List=[(1, 3, 10), (1, 4, 60), (2, 3, 5),<br>      (2, 4, 20), (3, 4, 1)]<br>G.add_nodes_from(range(1,5))<br>G.add_weighted_edges_from(List)<br>W1 = np.array(list(G.adjacency()))   #从图G导出权重邻接矩阵<br>W2 = nx.get_edge_attributes(G, <span class="hljs-string">&#x27;weight&#x27;</span>)  #导出赋权边的字典数据<br><span class="hljs-attribute">pos</span>=nx.spring_layout(G)<br>nx.draw(G,pos,<span class="hljs-attribute">with_labels</span>=<span class="hljs-literal">True</span>, <span class="hljs-attribute">font_weight</span>=<span class="hljs-string">&#x27;bold&#x27;</span>)<br>nx.draw_networkx_edge_labels(G,pos, <span class="hljs-attribute">font_size</span>=13, <span class="hljs-attribute">edge_labels</span>=W2)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;邻接矩阵为：\n&#x27;</span>, W1); <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;邻接表字典为：\n&#x27;</span>, G.adj)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;邻接表列表为：\n&#x27;</span>, list(G.adjacency()))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;列表字典为：\n&#x27;</span>, nx.to_dict_of_lists(G))<br><br>plt.show()<br></code></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308162139752.png" srcset="/img/loading.gif" lazyload alt="image-20230816213945660" style="zoom:50%;" />



<h1 id="最短路径"><a href="#最短路径" class="headerlink" title="最短路径"></a>最短路径</h1><p>最短路径问题是图论中非常经典的问题之一，旨在寻找图中两顶点之间的最短路径。作为一个基本工具，实际应用中的许多优化问题，如管道铺设、线路安排、厂区布局、设备更新等，都可被归结为最短路径问题来解决。</p>
<p>求最短路的算法有Dijkstra（迪克斯特拉）标号算法和Floyd（弗洛伊德）算法等方法，但Dijkstra标号算法只适用于边权是非负的情形。最短路问题也可以归结为一个 0-1 整数规划模型。</p>
<h3 id="固定起点的最短路-–-Dijkstra标号算法"><a href="#固定起点的最短路-–-Dijkstra标号算法" class="headerlink" title="固定起点的最短路 – Dijkstra标号算法"></a>固定起点的最短路 – Dijkstra标号算法</h3><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171449853.png" srcset="/img/loading.gif" lazyload alt="image-20230817144824516"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171449864.png" srcset="/img/loading.gif" lazyload alt="image-20230817144851654"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171451619.png" srcset="/img/loading.gif" lazyload alt="image-20230817145109576"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171453726.png" srcset="/img/loading.gif" lazyload alt="image-20230817145359668"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171456829.png" srcset="/img/loading.gif" lazyload alt="image-20230817145640782"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import networkx as nx<br><br>G = nx.DiGraph()<br>List = [(1,2,6), (1,3,3), (1,4,1), (2,5,1), (3,2,2), (3,4,2), (4,6,10), (5,4,6),<br>        (5,6,4), (5,7,3), (5,8,6), (6,5,10), (6,7,2), (7,8,4), (9,5,2), (9,8,3)]<br>G.add_nodes_from(range(1,10))<br>G.add_weighted_edges_from(List)<br>path = nx.dijkstra_path(G, 1, 8, <span class="hljs-attribute">weight</span>=<span class="hljs-string">&#x27;weight&#x27;</span>)  #求最短路径<br>d = nx.dijkstra_path_length(G, 1, 8, <span class="hljs-attribute">weight</span>=<span class="hljs-string">&#x27;weight&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;最短路径为：&#x27;</span>, path)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;最小费用为：&#x27;</span>, d)<br><br><span class="hljs-comment"># 最短路径为： [1, 3, 2, 5, 8]</span><br><span class="hljs-comment"># 最小费用为： 12</span><br><br>W2 = nx.get_edge_attributes(G, <span class="hljs-string">&#x27;weight&#x27;</span>)<br><span class="hljs-attribute">pos</span>=nx.spring_layout(G)<br>nx.draw(G,pos,<span class="hljs-attribute">with_labels</span>=<span class="hljs-literal">True</span>, <span class="hljs-attribute">font_weight</span>=<span class="hljs-string">&#x27;bold&#x27;</span>)<br>nx.draw_networkx_edge_labels(G,pos, <span class="hljs-attribute">font_size</span>=13, <span class="hljs-attribute">edge_labels</span>=W2)<br>plt.show()<br></code></pre></td></tr></table></figure>

<img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171516118.png" srcset="/img/loading.gif" lazyload alt="image-20230817151604068" style="zoom:50%;" />

<h3 id="所有顶点之间最短路的Floyd算法"><a href="#所有顶点之间最短路的Floyd算法" class="headerlink" title="所有顶点之间最短路的Floyd算法"></a>所有顶点之间最短路的Floyd算法</h3><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171518744.png" srcset="/img/loading.gif" lazyload alt="image-20230817151842703"></p>
<h4 id="求距离矩阵的算法"><a href="#求距离矩阵的算法" class="headerlink" title="求距离矩阵的算法"></a>求距离矩阵的算法</h4><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171520068.png" srcset="/img/loading.gif" lazyload alt="image-20230817152022013"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171520347.png" srcset="/img/loading.gif" lazyload alt="image-20230817152037305"></p>
<h4 id="建立路径矩阵的算法"><a href="#建立路径矩阵的算法" class="headerlink" title="建立路径矩阵的算法"></a>建立路径矩阵的算法</h4><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171521148.png" srcset="/img/loading.gif" lazyload alt="image-20230817152158106"></p>
<img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171522603.png" srcset="/img/loading.gif" lazyload alt="image-20230817152223547" style="zoom: 50%;" />

<h4 id="最短路的路径查找算法"><a href="#最短路的路径查找算法" class="headerlink" title="最短路的路径查找算法"></a>最短路的路径查找算法</h4><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171525986.png" srcset="/img/loading.gif" lazyload alt="image-20230817152528929"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171525671.png" srcset="/img/loading.gif" lazyload alt="image-20230817152552617"></p>
<p><strong>NetworkX 求所有顶点对之间最短路径的函数为</strong></p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">shortest_path(G, source=None, target=None, weight=None, <span class="hljs-keyword">method</span>=&#x27;<span class="hljs-title function_">dijkstra</span>&#x27;)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>G</code>：一个图。</li>
<li><code>source</code>：源节点。如果未指定，则默认使用函数中的第一个节点。</li>
<li><code>target</code>：目标节点。如果未指定，则函数将计算从源节点到所有其他节点的最短路径。</li>
<li><code>weight</code>：用于衡量路径长度的属性。如果未指定，则使用边的权重作为默认值。</li>
<li><code>method</code>：指定计算最短路径的方法。目前支持的方法有’dijkstra’、’bellman_ford’和’astar’。如果未指定，则默认使用’dijkstra’方法。①”dijkstra”算法适用于带有正权重的图，它假设所有的权重都是正数。如果图中存在负权重，那么该算法可能无法返回正确的最短路径。②”bellman_ford”算法适用于带有负权重的图，它可以处理权重为负数的情况。但是，该算法要求图中不能存在循环，否则可能无法得到正确的结果。③”astar”算法适用于带有非负权重的图，它是一种启发式搜索算法，可以在加权图中找到最短路径。它使用启发式信息来指导搜索过程，通常可以提供更快的性能。</li>
</ul>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">shortest_path_length(G, source=None, target=None, weight=None, <span class="hljs-keyword">method</span>=&#x27;<span class="hljs-title function_">dijkstra</span>&#x27;)<br></code></pre></td></tr></table></figure>

<p>注意：<code>shortest_path_length</code>与<code>shortest_path</code>函数有些类似，但返回的结果不同。<code>shortest_path</code>返回的是一个包含路径节点的字典，而<code>shortest_path_length</code>返回的是一个包含最短路径长度的字典。</p>
<p><strong>如果只求所有顶点之间的最短路径</strong>，也可以使用以下函数，<strong>返回值为所有顶点对之间的最短距离矩阵</strong></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">floyd_warshall_numpy(G, <span class="hljs-attribute">nodelist</span>=None, <span class="hljs-attribute">weight</span>=<span class="hljs-string">&#x27;weight&#x27;</span>)<br></code></pre></td></tr></table></figure>

<ul>
<li><code>G</code>：一个图。</li>
<li><code>nodelist</code>：节点列表。如果未指定，则使用图的节点列表。</li>
<li><code>weight</code>：用于衡量路径长度的属性。如果未指定，则使用边的权重作为默认值。</li>
</ul>
<p>函数的返回值是一个二维数组，其中第i行第j列的元素表示从节点i到节点j的最短路径长度。Floyd-Warshall算法是一种用于计算加权图中所有节点对之间的最短路径的算法。它适用于带权重的图，可以处理负权重的边。</p>
<p>e.g.</p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171542935.png" srcset="/img/loading.gif" lazyload alt="image-20230816212404711"></p>
<p>​    <strong>求图中所示赋权图所有顶点对之间的最短距离和最短路径。</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171544875.png" srcset="/img/loading.gif" lazyload alt="image-20230817154456815"></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import networkx as nx<br>import numpy as np<br><br>G = nx<span class="hljs-selector-class">.Graph</span>()<br>List = <span class="hljs-selector-attr">[(1, 3, 10), (1, 4, 60), (2, 3, 5), (2, 4, 20), (3, 4, 1)]</span><br>G<span class="hljs-selector-class">.add_nodes_from</span>(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">5</span>))<br>G<span class="hljs-selector-class">.add_weighted_edges_from</span>(List)<br>d = nx<span class="hljs-selector-class">.floyd_warshall_numpy</span>(G)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(<span class="hljs-string">&#x27;最短距离矩阵为：\n&#x27;</span>, d)</span></span><br>path = nx<span class="hljs-selector-class">.shortest_path</span>(G, weight=<span class="hljs-string">&#x27;weight&#x27;</span>, method=<span class="hljs-string">&#x27;bellman-ford&#x27;</span>)<br><span class="hljs-keyword">for</span> <span class="hljs-selector-tag">i</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-built_in">len</span>(d)):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(d)+<span class="hljs-number">1</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;顶点&#123;&#125;到顶点&#123;&#125;的最短路径为：&#x27;</span><span class="hljs-selector-class">.format</span>(<span class="hljs-selector-tag">i</span>,j), path<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span>)<br></code></pre></td></tr></table></figure>

<p><strong>运行结果</strong></p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs inform7">最短距离矩阵为：<br> <span class="hljs-comment">[<span class="hljs-comment">[ 0. 15. 10. 11.]</span></span><br><span class="hljs-comment"> <span class="hljs-comment">[15.  0.  5.  6.]</span></span><br><span class="hljs-comment"> <span class="hljs-comment">[10.  5.  0.  1.]</span></span><br><span class="hljs-comment"> <span class="hljs-comment">[11.  6.  1.  0.]</span>]</span><br>顶点1到顶点2的最短路径为： <span class="hljs-comment">[1, 3, 2]</span><br>顶点1到顶点3的最短路径为： <span class="hljs-comment">[1, 3]</span><br>顶点1到顶点4的最短路径为： <span class="hljs-comment">[1, 3, 4]</span><br>顶点2到顶点3的最短路径为： <span class="hljs-comment">[2, 3]</span><br>顶点2到顶点4的最短路径为： <span class="hljs-comment">[2, 3, 4]</span><br>顶点3到顶点4的最短路径为： <span class="hljs-comment">[3, 4]</span><br><br>进程已结束,退出代码0<br></code></pre></td></tr></table></figure>

<h3 id="应用范例"><a href="#应用范例" class="headerlink" title="应用范例"></a>应用范例</h3><h4 id="设备更新问题"><a href="#设备更新问题" class="headerlink" title="设备更新问题"></a>设备更新问题</h4><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171547925.png" srcset="/img/loading.gif" lazyload alt="image-20230817154709863"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171548909.png" srcset="/img/loading.gif" lazyload alt="image-20230817154814867"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171633503.png" srcset="/img/loading.gif" lazyload alt="image-20230817163302429"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171633064.png" srcset="/img/loading.gif" lazyload alt="image-20230817163315012"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import numpy as np<br>import networkx as nx<br>import pylab as plt<br><br><span class="hljs-attribute">a</span>=np.zeros((6,6))<br>a[0,1:]=[15,20,27,37,54]<br>a[1,2:]=[15,20,27,37]<br>a[2,3:]=[16,21,28]<br>a[3,4:]=[16,21]<br>a[4,5]=17<br><br><span class="hljs-attribute">G</span>=nx.DiGraph(a)  #构造赋权有向图,顶点编号为0,1,…,5<br><span class="hljs-attribute">p</span>=nx.shortest_path(G,0,5,weight=&#x27;weight&#x27;)<br><span class="hljs-attribute">d</span>=nx.shortest_path_length(G,0,5,weight=&#x27;weight&#x27;)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;path=&#x27;</span>,p); <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;d=&#x27;</span>,d)<br>plt.rc(<span class="hljs-string">&#x27;font&#x27;</span>,<span class="hljs-attribute">size</span>=16)<br><span class="hljs-attribute">pos</span>=nx.shell_layout(G)  #设置布局<br><span class="hljs-attribute">w</span>=nx.get_edge_attributes(G,&#x27;weight&#x27;)<br><span class="hljs-attribute">key</span>=range(6); s=[<span class="hljs-string">&#x27;v&#x27;</span>+str(i+1) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> key]<br><span class="hljs-attribute">s</span>=dict(zip(key,s)) #构造用于顶点标注的字符字典<br>nx.draw(G, pos, <span class="hljs-attribute">font_weight</span>=<span class="hljs-string">&#x27;bold&#x27;</span>, <span class="hljs-attribute">labels</span>=s, <span class="hljs-attribute">node_color</span>=<span class="hljs-string">&#x27;r&#x27;</span>)<br>nx.draw_networkx_edge_labels(G, pos, <span class="hljs-attribute">edge_labels</span>=w)<br><span class="hljs-attribute">path_edges</span>=list(zip(p, p[1:]))<br>nx.draw_networkx_edges(G, pos, <span class="hljs-attribute">edgelist</span>=path_edges,edge_color=&#x27;r&#x27;, <span class="hljs-attribute">width</span>=3)<br>plt.savefig(<span class="hljs-string">&#x27;fig6_9.png&#x27;</span>, <span class="hljs-attribute">dpi</span>=500); plt.show()<br></code></pre></td></tr></table></figure>

<h4 id="选址问题"><a href="#选址问题" class="headerlink" title="选址问题"></a>选址问题</h4><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171717149.png" srcset="/img/loading.gif" lazyload alt="image-20230817171743087"></p>
<img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171718898.png" srcset="/img/loading.gif" lazyload alt="img" style="zoom: 33%;" />

<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171718477.png" srcset="/img/loading.gif" lazyload alt="image-20230817171858423"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171719235.png" srcset="/img/loading.gif" lazyload alt="image-20230817171912177"></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">import</span> numpy as np<br><span class="hljs-attribute">import</span> networkx as nx<br><br><span class="hljs-attribute">L</span>=[(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">20</span>), (<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">15</span>), (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">20</span>), (<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">60</span>), (<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">25</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">30</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">18</span>), (<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">15</span>)]<br><span class="hljs-attribute">G</span> = nx.Graph()<br><span class="hljs-attribute">G</span>.add_nodes_from(np.arange(<span class="hljs-number">1</span>,<span class="hljs-number">7</span>))<br><span class="hljs-attribute">G</span>.add_weighted_edges_from(L)<br><span class="hljs-attribute">d</span> = nx.floyd_warshall_numpy(G)<br><span class="hljs-attribute">d</span> = np.array(d)  #转换为array数组<br><span class="hljs-attribute">md</span> = np.max(d, axis=<span class="hljs-number">1</span>)   #逐行求最大值<br><span class="hljs-attribute">mmd</span> = min(md)          #求最小值<br><span class="hljs-attribute">ind</span> = np.argmin(md)+<span class="hljs-number">1</span>     #求最小值的地址<br><span class="hljs-attribute">print</span>(d); print(<span class="hljs-string">&quot;最小值为：&quot;</span>, mmd)<br><span class="hljs-attribute">print</span>(<span class="hljs-string">&quot;最小值的地址为：&quot;</span>, ind)<br></code></pre></td></tr></table></figure>

<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[<span class="hljs-comment">[ 0. 20. 33. 63. 15. 30.]</span></span><br><span class="hljs-comment"> <span class="hljs-comment">[20.  0. 20. 50. 25. 40.]</span></span><br><span class="hljs-comment"> <span class="hljs-comment">[33. 20.  0. 30. 18. 33.]</span></span><br><span class="hljs-comment"> <span class="hljs-comment">[63. 50. 30.  0. 48. 63.]</span></span><br><span class="hljs-comment"> <span class="hljs-comment">[15. 25. 18. 48.  0. 15.]</span></span><br><span class="hljs-comment"> <span class="hljs-comment">[30. 40. 33. 63. 15.  0.]</span>]</span><br>最小值为： 33.0<br>最小值的地址为： 3<br></code></pre></td></tr></table></figure>

<h4 id="最短路的-0-1-整数规划模型"><a href="#最短路的-0-1-整数规划模型" class="headerlink" title="最短路的 0-1 整数规划模型"></a>最短路的 0-1 整数规划模型</h4><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171952954.png" srcset="/img/loading.gif" lazyload alt="image-20230817195156857"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171952936.png" srcset="/img/loading.gif" lazyload alt="image-20230817195215884"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171952330.png" srcset="/img/loading.gif" lazyload alt="image-20230817195245256"></p>
<p>e.g.</p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171953928.png" srcset="/img/loading.gif" lazyload alt="image-20230817195323868"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171954292.png" srcset="/img/loading.gif" lazyload alt="image-20230817195404227"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171954741.png" srcset="/img/loading.gif" lazyload alt="image-20230817195429684"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308171954451.png" srcset="/img/loading.gif" lazyload alt="image-20230817195454407"></p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs subunit">import numpy as np<br>import cvxpy as cp<br><br>L=[(1,2,18),(1,5,15),(2,3,20),(2,4,60),(2,5,12),<br>  (3,4,30),(3,5,18),(4,6,10),(5,6,15)]<br>a=np.ones((6,6))*100000  #邻接矩阵初始化<br>for i in range(len(L)):<br>    a[L[i][0]<span class="hljs-string">-1</span>,L[i][1]<span class="hljs-string">-1</span>]=L[i][2]<br>    a[L[i][1]<span class="hljs-string">-1</span>,L[i][0]<span class="hljs-string">-1</span>]=L[i][2]<br>x=cp.Variable((6,6), integer=True)<br>obj=cp.Minimize(cp.sum(cp.multiply(a, x)))<br>con=[sum(x[1,:])==1, sum(x[:,1])==0,<br>     sum(x[:,3])==1, x&gt;=0, x&lt;=1]<br>for i in set(range(6))-&#123;1,3&#125;:<br>    con.append(sum(x[i,:])==sum(x[:,i]))<br>prob = cp.Problem(obj, con)<br>prob.solve()<br>print(&quot;最优值为:&quot;, prob.value)<br>print(&quot;最优解为：\n&quot;, x.value)<br>i,j=np.nonzero(x.value)<br>print(&quot;最短路径的起点：&quot;, i<span class="hljs-string">+1</span>)<br>print(&quot;最短路径的终点：&quot;, j<span class="hljs-string">+1</span>)<br><br><br>最优值为: 37.0<br>最优解为：<br> [[<span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>.]<br> [<span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>.  1. <span class="hljs-string">-0</span>.]<br> [<span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>.]<br> [<span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>.]<br> [<span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>.  1.]<br> [<span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>.  1. <span class="hljs-string">-0</span>. <span class="hljs-string">-0</span>.]]<br>最短路径的起点： [2 5 6]<br>最短路径的终点： [5 6 4]<br></code></pre></td></tr></table></figure>

<h1 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h1><p><code>minimum_spanning_tree</code> 是 NetworkX 库中的一个函数，用于计算给定图 G 的最小生成树。函数的参数包括图 G、边的权值属性 weight，以及使用的算法 algorithm。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">T</span>=minimum_spanning_tree(G, <span class="hljs-attribute">weight</span>=<span class="hljs-string">&#x27;weight&#x27;</span>, <span class="hljs-attribute">algorithm</span>=<span class="hljs-string">&#x27;kruskal&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>其中G为输入的图，algorithm的取值有三种字符串：’kruskal’，’prim’，或’boruvka’，缺省值为’kruskal’；返回值T为所求得的最小生成树的可迭代对象。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308172004700.png" srcset="/img/loading.gif" lazyload alt="image-20230817200453634"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308172005795.png" srcset="/img/loading.gif" lazyload alt="image-20230817200532746"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308172005300.png" srcset="/img/loading.gif" lazyload alt="image-20230817200541254"></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">import</span> networkx as nx<br><span class="hljs-attribute">import</span> pylab as plt<br><br><span class="hljs-attribute">L</span>=[(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">7</span>,<span class="hljs-number">5</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">8</span>,<span class="hljs-number">4</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>),(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">5</span>)]<br><span class="hljs-attribute">G</span>=nx.Graph()<br><span class="hljs-attribute">G</span>.add_weighted_edges_from(L)<br><span class="hljs-attribute">T</span>=nx.minimum_spanning_tree(G)  #返回可迭代对象<br><br><span class="hljs-attribute">pos</span>=nx.circular_layout(G)<br><span class="hljs-attribute">plt</span>.subplot(<span class="hljs-number">121</span>)  #下面画连通图<br><span class="hljs-attribute">nx</span>.draw(G,pos,with_labels=True, font_size=<span class="hljs-number">13</span>)<br><span class="hljs-attribute">w1</span>=nx.get_edge_attributes(G, &#x27;weight&#x27;)<br><span class="hljs-attribute">nx</span>.draw_networkx_edge_labels(G, pos, edge_labels=w1)<br><span class="hljs-attribute">plt</span>.subplot(<span class="hljs-number">122</span>)  #下面画最小生成树<br><span class="hljs-attribute">nx</span>.draw(T, pos, with_labels=True, font_weight=&#x27;bold&#x27;)<br><span class="hljs-attribute">w2</span>=nx.get_edge_attributes(T, &#x27;weight&#x27;)<br><span class="hljs-attribute">nx</span>.draw_networkx_edge_labels(T, pos, edge_labels=w2)<br><span class="hljs-attribute">plt</span>.show()<br></code></pre></td></tr></table></figure>

<p><strong>模型</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517158.png" srcset="/img/loading.gif" lazyload alt="image-20230818151632577"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517171.png" srcset="/img/loading.gif" lazyload alt="image-20230818151643703"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517559.png" srcset="/img/loading.gif" lazyload alt="image-20230818151719492"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517331.png" srcset="/img/loading.gif" lazyload alt="image-20230818151736268"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181517497.png" srcset="/img/loading.gif" lazyload alt="image-20230818151752422"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs routeros"> import cvxpy as cp  <br>import numpy as np  <br>  <br><span class="hljs-comment"># 定义一个列表L，其中包含了图的边信息，每个元素是一个元组，元组的第一个元素是边的起点，第二个元素是边的终点，第三个元素是边的权重  </span><br>L=[(0,1,2),(0,2,1),(0,3,3),(0,4,4),(0,5,4),(0,6,2),(0,7,5),(0,8,4),  <br>    (1,2,4),(1,8,1),(2,3,1),(3,4,1),(4,5,5),(5,6,2),(6,7,3),(7,8,5)]  <br>  <br><span class="hljs-comment"># 创建一个9x9的二维数组a，所有元素初始值为10000  </span><br><span class="hljs-attribute">a</span>=np.ones((9,9))*10000  <br>  <br><span class="hljs-comment"># 通过循环遍历列表L中的每一个元素，也就是每一个边的信息  </span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(L)):  <br>    # 根据边的信息，更新二维数组a的对应位置的元素值，这里可能是某种图的权值表示  <br>    a[L[i][0], L[i][1]]=L[i][2]  <br>    # 注意这里同时也把(L[i][1], L[i][0])的值设为相同的值，这是因为在无向图的情况下，一条边的两个方向是等价的  <br>    a[L[i][1], L[i][0]]=L[i][2]  <br>  <br><span class="hljs-comment"># 在cvxpy中，创建一个9x9的变量x，这个变量的每个元素都为整数  </span><br><span class="hljs-attribute">x</span>=cp.Variable((9,9), <span class="hljs-attribute">integer</span>=<span class="hljs-literal">True</span>)  <br><span class="hljs-comment"># 在cvxpy中，创建一个长度为9的变量u，这个变量的每个元素都为正数  </span><br><span class="hljs-attribute">u</span>=cp.Variable(9, <span class="hljs-attribute">pos</span>=<span class="hljs-literal">True</span>)  <br>  <br><span class="hljs-comment"># 定义优化问题的目标函数，这里是求a与x的乘积的和的最小值  </span><br><span class="hljs-attribute">obj</span>=cp.Minimize(cp.sum(cp.multiply(a,x)))  <br>  <br><span class="hljs-comment"># 定义优化问题的约束条件，这里主要有以下几类：  </span><br><span class="hljs-comment"># 1. x的第一列的和大于等于1  </span><br>con=[cp.sum(x[0,:])&gt;=1, u[0]==0,  <br>     # 2. u的后8个元素大于等于1且小于等于8  <br>     u[1:]&gt;=1, u[1:]&lt;=8, x&gt;=0, x&lt;=1]  <br><span class="hljs-comment"># 3. 对于每一行，只有一列的元素值为1，其余元素值为0  </span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(1,9):  <br>    con.append(sum(x[:,i])==1)  <br><span class="hljs-comment"># 4. 对于每一列，u[i]与u[j]的差值加上9乘以x[i,j]小于等于8  </span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(9):  <br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(1,9):  <br>        con.append(u[i]-u[j]+9*x[i,j]&lt;=8)  <br>  <br><span class="hljs-comment"># 根据目标和约束创建一个优化问题实例  </span><br>prob = cp.Problem(obj, con)  <br>  <br><span class="hljs-comment"># 解决这个优化问题  </span><br>prob.solve()  <br>  <br><span class="hljs-comment"># 找到变量x中所有值为非零的元素的索引，也就是图中的顶点索引  </span><br>i, j = np.nonzero(x.value)  <br>  <br><span class="hljs-comment"># 输出最优值和最优解  </span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最优值为:&quot;</span>,prob.value)  <br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最优解为：\n&quot;</span>,x.value)  <br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;i=&#x27;</span>, i); <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;j=&#x27;</span>, j)<br></code></pre></td></tr></table></figure>



<h1 id="角色问题"><a href="#角色问题" class="headerlink" title="角色问题"></a>角色问题</h1><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181601530.png" srcset="/img/loading.gif" lazyload alt="image-20230818155757773"></p>
<p>  e.g.<strong>会议安排</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181728117.png" srcset="/img/loading.gif" lazyload alt="image-20230818172817064"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181730196.png" srcset="/img/loading.gif" lazyload alt="image-20230818173016129"></p>
<img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181730342.png" srcset="/img/loading.gif" lazyload alt="image-20230818173032296" style="zoom: 80%;" />

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> cvxpy <span class="hljs-keyword">as</span> cp<br><span class="hljs-keyword">import</span> networkx <span class="hljs-keyword">as</span> nx<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>L = [&#123;<span class="hljs-string">&#x27;张&#x27;</span>,<span class="hljs-string">&#x27;李&#x27;</span>,<span class="hljs-string">&#x27;王&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;李&#x27;</span>,<span class="hljs-string">&#x27;赵&#x27;</span>,<span class="hljs-string">&#x27;刘&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;张&#x27;</span>,<span class="hljs-string">&#x27;刘&#x27;</span>,<span class="hljs-string">&#x27;王&#x27;</span>&#125;,<br>     &#123;<span class="hljs-string">&#x27;赵&#x27;</span>,<span class="hljs-string">&#x27;刘&#x27;</span>,<span class="hljs-string">&#x27;孙&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;张&#x27;</span>,<span class="hljs-string">&#x27;王&#x27;</span>,<span class="hljs-string">&#x27;孙&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;李&#x27;</span>,<span class="hljs-string">&#x27;刘&#x27;</span>,<span class="hljs-string">&#x27;王&#x27;</span>&#125;]<br>w = np.zeros((<span class="hljs-number">6</span>,<span class="hljs-number">6</span>))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,<span class="hljs-number">6</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(L[i] &amp; L[j])&gt;=<span class="hljs-number">1</span>:<br>            w[i,j] = <span class="hljs-number">1</span>  <span class="hljs-comment">#构造邻接矩阵的上三角元素</span><br>ni, nj = np.nonzero(w)  <span class="hljs-comment">#边的端点编号</span><br>w = w + w.T   <span class="hljs-comment">#构造完整的邻接矩阵</span><br>deg = w.<span class="hljs-built_in">sum</span>(axis=<span class="hljs-number">1</span>)  <span class="hljs-comment">#求各个顶点的度</span><br>K = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">max</span>(deg))  <span class="hljs-comment">#顶点的最大度</span><br>n = <span class="hljs-built_in">len</span>(w)  <span class="hljs-comment">#顶点的个数</span><br>x = cp.Variable((n, K+<span class="hljs-number">1</span>), integer=<span class="hljs-literal">True</span>)<br>y = cp.Variable()  <span class="hljs-comment">#定义一个变量</span><br>obj = cp.Minimize(y)<br>con = [cp.<span class="hljs-built_in">sum</span>(x, axis=<span class="hljs-number">1</span>)==<span class="hljs-number">1</span>, x&gt;=<span class="hljs-number">0</span>, x&lt;=<span class="hljs-number">1</span>]<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>    con.append(y&gt;=<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,K+<span class="hljs-number">2</span>)@x[i,:])<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(K+<span class="hljs-number">1</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(ni)):<br>        con.append(x[ni[i],k]+x[nj[i],k]&lt;=<span class="hljs-number">1</span>)<br>prob = cp.Problem(obj, con)<br>prob.solve()<br>i, k = np.nonzero(x.value)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最优值为:&quot;</span>,prob.value)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最优解为：\n&quot;</span>,x.value)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;顶点和颜色的对应关系如下：&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;i=&#x27;</span>, i+<span class="hljs-number">1</span>); <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;k=&#x27;</span>, k+<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>

<h1 id="最大流与最小费用流问题"><a href="#最大流与最小费用流问题" class="headerlink" title="最大流与最小费用流问题"></a>最大流与最小费用流问题</h1><h2 id="最大流问题"><a href="#最大流问题" class="headerlink" title="最大流问题"></a>最大流问题</h2><p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181735351.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181735479.png" srcset="/img/loading.gif" lazyload alt="image-20230818173535424"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181736214.png" srcset="/img/loading.gif" lazyload alt="image-20230818173627151"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs routeros"> import networkx as nx    <br>import numpy as np  <br>import matplotlib.pyplot as plt  <br>  <br><span class="hljs-comment"># 创建一个有向图 G  </span><br><span class="hljs-attribute">G</span>=nx.DiGraph()  <br>  <br><span class="hljs-comment"># 添加节点到图 G，节点编号从1到8  </span><br>G.add_nodes_from(range(1,9))  <br>  <br><span class="hljs-comment"># 添加带权重的边到图 G，边的权重设置为&#x27;capacity&#x27;  </span><br>G.add_weighted_edges_from(L,<span class="hljs-attribute">weight</span>=<span class="hljs-string">&#x27;capacity&#x27;</span>)  # 这里 L 是未定义的变量，需要具体定义  <br>  <br><span class="hljs-comment"># 使用 networkx 的 maximum_flow 函数计算从节点1到节点8的最大流，返回流量值和每个边的流量值  </span><br>value, flow_dict= nx.maximum_flow(G, 1, 8)  <br>  <br><span class="hljs-comment"># 打印最大流的流量值  </span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最大流的流量为：&quot;</span>,value)  <br>  <br><span class="hljs-comment"># 打印最大流每个边的流量值  </span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最大流为：&quot;</span>, flow_dict)  <br>  <br><span class="hljs-comment"># 获取最大流邻接矩阵的大小  </span><br>n = len(flow_dict)  <br>  <br><span class="hljs-comment"># 创建一个 n*n 的全零数组 adj_mat，用于存储最大流的邻接矩阵  </span><br>adj_mat = np.zeros((n, n), <span class="hljs-attribute">dtype</span>=int)  <br>  <br><span class="hljs-comment"># 遍历每个边的流量值，将流量值对应到邻接矩阵的相应位置  </span><br><span class="hljs-keyword">for</span> i, adj <span class="hljs-keyword">in</span> flow_dict.items():  <br>    <span class="hljs-keyword">for</span> j, weight <span class="hljs-keyword">in</span> adj.items():  <br>        adj_mat[i-1,j-1] = weight  <br>  <br><span class="hljs-comment"># 打印最大流的邻接矩阵  </span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最大流的邻接矩阵为：\n&quot;</span>,adj_mat)  <br>  <br><span class="hljs-comment"># 获取邻接矩阵非零元素的位置（即最大流中的边的两端点）  </span><br>ni,<span class="hljs-attribute">nj</span>=np.nonzero(adj_mat)  #非零弧的两端点编号  <br>  <br><span class="hljs-comment"># 设置 matplotlib 的字体大小为16  </span><br>plt.rc(<span class="hljs-string">&#x27;font&#x27;</span>,<span class="hljs-attribute">size</span>=16)  <br>  <br><span class="hljs-comment"># 使用 networkx 的 shell_layout 函数设置图的布局（这里未使用）  </span><br><span class="hljs-attribute">pos</span>=nx.shell_layout(G)  #设置布局  <br>  <br><span class="hljs-comment"># 获取边的容量属性，用于绘制标签（这里未使用）  </span><br><span class="hljs-attribute">w</span>=nx.get_edge_attributes(G,&#x27;capacity&#x27;)  <br>  <br><span class="hljs-comment"># 绘制图 G，节点加粗，带标签，颜色为黄色  </span><br>nx.draw(G,pos,<span class="hljs-attribute">font_weight</span>=<span class="hljs-string">&#x27;bold&#x27;</span>,with_labels=True,node_color=&#x27;y&#x27;)  <br>  <br><span class="hljs-comment"># 绘制图的边标签，标签为边的容量值（这里未使用）  </span><br>nx.draw_networkx_edge_labels(G,pos,<span class="hljs-attribute">edge_labels</span>=w)  <br>  <br><span class="hljs-comment"># 将非零元素的位置转化为边的编号（即最大流中的路径）  </span><br><span class="hljs-attribute">path_edges</span>=list(zip(ni+1,nj+1))  <br>  <br><span class="hljs-comment"># 绘制最大流路径的边，颜色为红色，宽度为3  </span><br>nx.draw_networkx_edges(G,pos,<span class="hljs-attribute">edgelist</span>=path_edges,edge_color=&#x27;r&#x27;,width=3)  <br>  <br><span class="hljs-comment"># 显示绘制的图  </span><br>plt.show()<br></code></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jrdhome/images@main/images/202308181738512.png" srcset="/img/loading.gif" lazyload alt="image-20230818173845439"></p>
<h3 id="解法一-图论"><a href="#解法一-图论" class="headerlink" title="解法一 图论"></a>解法一 图论</h3><p><img src="image-20230820004106878.png" srcset="/img/loading.gif" lazyload alt="image-20230820004106878"></p>
<p><img src="image-20230820003341836.png" srcset="/img/loading.gif" lazyload alt="image-20230820003341836"></p>
<p><strong>代码如下</strong></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import numpy as np<br>import networkx as nx<br>node=[<span class="hljs-string">&#x27;s&#x27;</span>,<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;B&#x27;</span>,<span class="hljs-string">&#x27;C&#x27;</span>,<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;E&#x27;</span>,<span class="hljs-string">&#x27;2b&#x27;</span>,<span class="hljs-string">&#x27;3b&#x27;</span>,<span class="hljs-string">&#x27;4b&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,<span class="hljs-string">&#x27;4&#x27;</span>,<span class="hljs-string">&#x27;t&#x27;</span>]<br><span class="hljs-attribute">n</span>=len(node); <span class="hljs-attribute">G</span>=nx.DiGraph(); G.add_nodes_from(node)<br>L=[(<span class="hljs-string">&#x27;s&#x27;</span>,<span class="hljs-string">&#x27;A&#x27;</span>,4),(<span class="hljs-string">&#x27;s&#x27;</span>,<span class="hljs-string">&#x27;B&#x27;</span>,3),(<span class="hljs-string">&#x27;s&#x27;</span>,<span class="hljs-string">&#x27;C&#x27;</span>,3),(<span class="hljs-string">&#x27;s&#x27;</span>,<span class="hljs-string">&#x27;D&#x27;</span>,2),(<span class="hljs-string">&#x27;s&#x27;</span>,<span class="hljs-string">&#x27;E&#x27;</span>,4),(<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;2b&#x27;</span>,1),<br>   (<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,1),(<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;3b&#x27;</span>,1),(<span class="hljs-string">&#x27;A&#x27;</span>,<span class="hljs-string">&#x27;4b&#x27;</span>,1),(<span class="hljs-string">&#x27;B&#x27;</span>,<span class="hljs-string">&#x27;2b&#x27;</span>,1),(<span class="hljs-string">&#x27;B&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,1),(<span class="hljs-string">&#x27;B&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,1),<br>   (<span class="hljs-string">&#x27;B&#x27;</span>,<span class="hljs-string">&#x27;4b&#x27;</span>,1),(<span class="hljs-string">&#x27;C&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,1),(<span class="hljs-string">&#x27;C&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,1),(<span class="hljs-string">&#x27;C&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,1),(<span class="hljs-string">&#x27;C&#x27;</span>,<span class="hljs-string">&#x27;4b&#x27;</span>,1),(<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,1),<br>   (<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,1),(<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;3b&#x27;</span>,1),(<span class="hljs-string">&#x27;D&#x27;</span>,<span class="hljs-string">&#x27;4b&#x27;</span>,1),(<span class="hljs-string">&#x27;E&#x27;</span>,<span class="hljs-string">&#x27;2b&#x27;</span>,1),(<span class="hljs-string">&#x27;E&#x27;</span>,<span class="hljs-string">&#x27;1&#x27;</span>,1),(<span class="hljs-string">&#x27;E&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,1),<br>   (<span class="hljs-string">&#x27;E&#x27;</span>,<span class="hljs-string">&#x27;4&#x27;</span>,1),(<span class="hljs-string">&#x27;2b&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,2),(<span class="hljs-string">&#x27;3b&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>,1),(<span class="hljs-string">&#x27;4b&#x27;</span>,<span class="hljs-string">&#x27;4&#x27;</span>,2),(<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;t&#x27;</span>,5),(<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;t&#x27;</span>,4),<br>   (<span class="hljs-string">&#x27;3&#x27;</span>,<span class="hljs-string">&#x27;t&#x27;</span>,4),(<span class="hljs-string">&#x27;4&#x27;</span>,<span class="hljs-string">&#x27;t&#x27;</span>,3)]<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> range(len(L)):<br>    G.add_edge(L[k][0],L[k][1],<span class="hljs-attribute">capacity</span>=L[k][2])<br>value, flow_dict= nx.maximum_flow(G, <span class="hljs-string">&#x27;s&#x27;</span>, <span class="hljs-string">&#x27;t&#x27;</span>)<br><span class="hljs-built_in">print</span>(value); <span class="hljs-built_in">print</span>(flow_dict)<br><span class="hljs-attribute">A</span>=np.zeros((n,n),dtype=int)<br><span class="hljs-keyword">for</span> i,adj <span class="hljs-keyword">in</span> flow_dict.items():<br>    <span class="hljs-keyword">for</span> j,f <span class="hljs-keyword">in</span> adj.items():<br>        A[node.index(i), node.index(j)]=f<br><span class="hljs-built_in">print</span>(A)<br></code></pre></td></tr></table></figure>

<h3 id="解法二-0-1规划"><a href="#解法二-0-1规划" class="headerlink" title="解法二  0-1规划"></a>解法二  0-1规划</h3><p><img src="image-20230820004449616.png" srcset="/img/loading.gif" lazyload alt="image-20230820004449457"></p>
<img src="C:/Users/86187/AppData/Roaming/Typora/typora-user-images/image-20230820004548166.png" srcset="/img/loading.gif" lazyload alt="image-20230820004548166" style="zoom: 50%;" />

<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import numpy as np<br>import cvxpy as cp<br><span class="hljs-attribute">a</span>=np.array([4, 3, 3, 2, 4])<br><span class="hljs-attribute">x</span>=cp.Variable((4,5), <span class="hljs-attribute">integer</span>=<span class="hljs-literal">True</span>)<br>obj = cp.Maximize(cp.sum(x))<br>con= [cp.sum(x, <span class="hljs-attribute">axis</span>=0) &lt;= a, <br>	  x[1,0]+x[1,1]+x[1,4] &lt;= 2,<br>      x[2,0]+x[2,3] &lt;= 1, <br>      sum(x[3,:-1]) &lt;= 2, <br>      x&gt;=0, x&lt;=1]<br>prob = cp.Problem(obj, con); prob.solve()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最优值为:&quot;</span>,prob.value)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最优解为：\n&quot;</span>,x.value)<br></code></pre></td></tr></table></figure>

<h2 id="最小费用流问题"><a href="#最小费用流问题" class="headerlink" title="最小费用流问题"></a>最小费用流问题</h2><p><img src="image-20230820005647995.png" srcset="/img/loading.gif" lazyload alt="image-20230820005647995"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs routeros">import numpy as np<br>import networkx as nx<br>L=[(<span class="hljs-string">&#x27;vs&#x27;</span>,<span class="hljs-string">&#x27;v2&#x27;</span>,5,3),(<span class="hljs-string">&#x27;vs&#x27;</span>,<span class="hljs-string">&#x27;v3&#x27;</span>,3,6),(<span class="hljs-string">&#x27;v2&#x27;</span>,<span class="hljs-string">&#x27;v4&#x27;</span>,2,8),(<span class="hljs-string">&#x27;v3&#x27;</span>,<span class="hljs-string">&#x27;v2&#x27;</span>,1,2),(<span class="hljs-string">&#x27;v3&#x27;</span>,<span class="hljs-string">&#x27;v5&#x27;</span>,4,2),<br>   (<span class="hljs-string">&#x27;v4&#x27;</span>,<span class="hljs-string">&#x27;v3&#x27;</span>,1,1),(<span class="hljs-string">&#x27;v4&#x27;</span>,<span class="hljs-string">&#x27;v5&#x27;</span>,3,4),(<span class="hljs-string">&#x27;v4&#x27;</span>,<span class="hljs-string">&#x27;vt&#x27;</span>,2,10),(<span class="hljs-string">&#x27;v5&#x27;</span>,<span class="hljs-string">&#x27;vt&#x27;</span>,5,2)]<br><span class="hljs-attribute">G</span>=nx.DiGraph()<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> range(len(L)):<br>    G.add_edge(L[k][0], L[k][1], <span class="hljs-attribute">capacity</span>=L[k][2], <span class="hljs-attribute">weight</span>=L[k][3])<br><span class="hljs-attribute">maxFlow</span>=nx.max_flow_min_cost(G,&#x27;vs&#x27;,&#x27;vt&#x27;)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;所求最大流为：&quot;</span>,maxFlow)<br><span class="hljs-attribute">mincost</span>=nx.cost_of_flow(G, maxFlow)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最小费用为：&quot;</span>, mincost)<br>node = list(G.nodes())  #导出顶点列表<br><span class="hljs-attribute">n</span>=len(node); <span class="hljs-attribute">flow_mat</span>=np.zeros((n,n))<br><span class="hljs-keyword">for</span> i,adj <span class="hljs-keyword">in</span> maxFlow.items():<br>    <span class="hljs-keyword">for</span> j,f <span class="hljs-keyword">in</span> adj.items():<br>        flow_mat[node.index(i),node.index(j)]=f<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最大流的流量为：&quot;</span>, sum(flow_mat[:,-1]))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最小费用最大流的邻接矩阵为：\n&quot;</span>,flow_mat)<br></code></pre></td></tr></table></figure>

<h1 id="关键路径"><a href="#关键路径" class="headerlink" title="关键路径"></a>关键路径</h1><h2 id="计划网络图"><a href="#计划网络图" class="headerlink" title="计划网络图"></a>计划网络图</h2><p><img src="image-20230820010430223.png" srcset="/img/loading.gif" lazyload alt="image-20230820010430223"></p>
<p><img src="image-20230820010542515.png" srcset="/img/loading.gif" lazyload alt="image-20230820010542515"></p>
<p><strong>建立计划网络图</strong></p>
<img src="C:/Users/86187/AppData/Roaming/Typora/typora-user-images/image-20230820013104221.png" srcset="/img/loading.gif" lazyload alt="image-20230820013104221" style="zoom:80%;" />

<p><img src="image-20230820013143068.png" srcset="/img/loading.gif" lazyload alt="image-20230820013143068"></p>
<img src="C:/Users/86187/AppData/Roaming/Typora/typora-user-images/image-20230820013230385.png" srcset="/img/loading.gif" lazyload alt="image-20230820013230385" style="zoom:80%;" />

<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs prolog">import numpy as np<br>import cvxpy as cp<br><br>x = cp.<span class="hljs-symbol">Variable</span>(<span class="hljs-number">8</span>, pos=<span class="hljs-symbol">True</span>)<br><span class="hljs-symbol">L</span> = [(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>), (<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">10</span>), (<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">11</span>), (<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">0</span>), (<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">15</span>),<br>     (<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">21</span>), (<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">25</span>), (<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">35</span>), (<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">0</span>), (<span class="hljs-number">6</span>,<span class="hljs-number">8</span>,<span class="hljs-number">20</span>), (<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">15</span>)]<br>obj = cp.<span class="hljs-symbol">Minimize</span>(sum(x)); con = []<br>for k in range(len(<span class="hljs-symbol">L</span>)):<br>    con.append(x[<span class="hljs-symbol">L</span>[k][<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>] &gt;= x[<span class="hljs-symbol">L</span>[k][<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>] + <span class="hljs-symbol">L</span>[k][<span class="hljs-number">2</span>])<br>prob = cp.<span class="hljs-symbol">Problem</span>(obj, con); prob.solve()<br>print(<span class="hljs-string">&#x27;最优值为&#x27;</span>, prob.value); print(<span class="hljs-string">&#x27;最优解为：&#x27;</span>, x.value)<br></code></pre></td></tr></table></figure>

<p><strong>求每个作业的最早开工时间、最迟开工时间和作业的关键路径</strong></p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs prolog">import numpy as np<br>import cvxpy as cp<br><br>n =<span class="hljs-number">8</span>; x = cp.<span class="hljs-symbol">Variable</span>(n, pos=<span class="hljs-symbol">True</span>); z = np.zeros(n)<br><span class="hljs-symbol">L</span> = [(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>), (<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">10</span>), (<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">11</span>), (<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">0</span>), (<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">15</span>),<br>     (<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">21</span>), (<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">25</span>), (<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">35</span>), (<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">0</span>), (<span class="hljs-number">6</span>,<span class="hljs-number">8</span>,<span class="hljs-number">20</span>), (<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">15</span>)]<br>obj = cp.<span class="hljs-symbol">Minimize</span>(sum(x)); con = []<br>for k in range(len(<span class="hljs-symbol">L</span>)):<br>    con.append(x[<span class="hljs-symbol">L</span>[k][<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>] &gt;= x[<span class="hljs-symbol">L</span>[k][<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>] + <span class="hljs-symbol">L</span>[k][<span class="hljs-number">2</span>])<br>prob = cp.<span class="hljs-symbol">Problem</span>(obj, con); prob.solve()<br>print(<span class="hljs-string">&#x27;最优值为&#x27;</span>, prob.value); print(<span class="hljs-string">&#x27;最优解为：&#x27;</span>, x.value)<br>xx = x.value; z[<span class="hljs-number">-1</span>] = xx[<span class="hljs-number">-1</span>]<br>for k in range(n<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>):<br>    z[k<span class="hljs-number">-1</span>]=min([z[a[<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>]-a[<span class="hljs-number">2</span>] for a in <span class="hljs-symbol">L</span> if a[<span class="hljs-number">0</span>]==k])<br>print(<span class="hljs-string">&#x27;z:&#x27;</span>, z); es=[]; lf=[]; ls=[]; ef=[]<br>for i in range(len(<span class="hljs-symbol">L</span>)):<br>    es.append([<span class="hljs-symbol">L</span>[i][<span class="hljs-number">0</span>], <span class="hljs-symbol">L</span>[i][<span class="hljs-number">1</span>], xx[<span class="hljs-symbol">L</span>[i][<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>]])<br>    lf.append([<span class="hljs-symbol">L</span>[i][<span class="hljs-number">0</span>], <span class="hljs-symbol">L</span>[i][<span class="hljs-number">1</span>], z[<span class="hljs-symbol">L</span>[i][<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>]])<br>    ls.append([<span class="hljs-symbol">L</span>[i][<span class="hljs-number">0</span>], <span class="hljs-symbol">L</span>[i][<span class="hljs-number">1</span>], z[<span class="hljs-symbol">L</span>[i][<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>]-<span class="hljs-symbol">L</span>[i][<span class="hljs-number">2</span>]])<br>    ef.append([<span class="hljs-symbol">L</span>[i][<span class="hljs-number">0</span>], <span class="hljs-symbol">L</span>[i][<span class="hljs-number">1</span>], xx[<span class="hljs-symbol">L</span>[i][<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>]+<span class="hljs-symbol">L</span>[i][<span class="hljs-number">2</span>]])<br>print(<span class="hljs-string">&#x27;作业最早开工时间如下：&#x27;</span>); print(es)<br>print(<span class="hljs-string">&#x27;作业最晚开工时间如下：&#x27;</span>); print(ls)<br></code></pre></td></tr></table></figure>

<p><strong>将关键路线看成最长路</strong></p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs prolog">import numpy as np<br>import cvxpy as cp<br><br><span class="hljs-symbol">L</span> = [(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>), (<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">10</span>), (<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">11</span>), (<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">4</span>), (<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">0</span>), (<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">15</span>),<br>     (<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">21</span>), (<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">25</span>), (<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">35</span>), (<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">0</span>), (<span class="hljs-number">6</span>,<span class="hljs-number">8</span>,<span class="hljs-number">20</span>), (<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">15</span>)]<br>x = cp.<span class="hljs-symbol">Variable</span>((<span class="hljs-number">8</span>,<span class="hljs-number">8</span>), integer=<span class="hljs-symbol">True</span>); fun = <span class="hljs-number">0</span><br>for i in range(len(<span class="hljs-symbol">L</span>)):<br>    fun = fun + x[<span class="hljs-symbol">L</span>[i][<span class="hljs-number">0</span>]<span class="hljs-number">-1</span>,<span class="hljs-symbol">L</span>[i][<span class="hljs-number">1</span>]<span class="hljs-number">-1</span>] * <span class="hljs-symbol">L</span>[i][<span class="hljs-number">2</span>]<br>obj = cp.<span class="hljs-symbol">Maximize</span>(fun); con =[ x&gt;=<span class="hljs-number">0</span>, x&lt;=<span class="hljs-number">1</span>]<br>out = [a[<span class="hljs-number">1</span>]<span class="hljs-number">-1</span> for a in <span class="hljs-symbol">L</span> if a[<span class="hljs-number">0</span>]==<span class="hljs-number">1</span>]  #起点相邻顶点的编号<br>con.append(sum(x[<span class="hljs-number">0</span>,out])==<span class="hljs-number">1</span>)   #起点发出弧的约束<br>ind = [a[<span class="hljs-number">0</span>]<span class="hljs-number">-1</span> for a in <span class="hljs-symbol">L</span> if a[<span class="hljs-number">1</span>]==<span class="hljs-number">8</span>]  #终点相邻顶点的编号<br>con.append(sum(x[ind,<span class="hljs-number">7</span>])==<span class="hljs-number">1</span>)   #终点进入弧的约束<br>for k in range(<span class="hljs-number">2</span>,<span class="hljs-number">8</span>):<br>    out = [a[<span class="hljs-number">1</span>]<span class="hljs-number">-1</span> for a in <span class="hljs-symbol">L</span> if a[<span class="hljs-number">0</span>]==k]  #k的出弧的相邻顶点<br>    ind = [a[<span class="hljs-number">0</span>]<span class="hljs-number">-1</span> for a in <span class="hljs-symbol">L</span> if a[<span class="hljs-number">1</span>]==k]  #k的入弧的相邻顶点<br>    con.append(sum(x[k<span class="hljs-number">-1</span>,out])==sum(x[ind,k<span class="hljs-number">-1</span>]))<br>prob = cp.<span class="hljs-symbol">Problem</span>(obj, con); prob.solve()<br>print(<span class="hljs-string">&#x27;最优值为&#x27;</span>, prob.value); print(<span class="hljs-string">&#x27;最优解为：\n&#x27;</span>, x.value)<br>ni, nj = np.nonzero(x.value)<br>print(<span class="hljs-string">&#x27;关键路径的端点为:&#x27;</span>); print(ni+<span class="hljs-number">1</span>); print(nj+<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>

















































<span id="more"></span>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Python/">Python</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/08/20/Linux-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Linux-正则表达式与文本三剑客</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/08/13/Linux-%E5%90%AF%E5%8A%A8%E5%92%8C%E5%86%85%E6%A0%B8%E7%AE%A1%E7%90%86/">
                        <span class="hidden-mobile">Linux-启动和内核管理</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
